<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>

<head>
    <title>Latihan PWS</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
</head>

<body>
    <div>Data anak Kontrakan</div>
    <hr />

    <script>

        function post() {
            const url = "http://localhost:8080/POST";
            let editID = document.getElementById("id").value;
            let nama = document.getElementById("nama").value;
            let nik = document.getElementById("nik").value;
            let tglLahir = document.getElementById("tanggalLahir").value;
            let file = document.getElementById("file").value;
            let timestamp = document.getElementById("timestamp").value;
            let dataText = { "id": editID, "nama": nama, "nik": nik, "tanggalLahir": tglLahir, "file":file, "timestamp":timestamp };
            let dataJson = JSON.stringify(dataText)

            $.ajax({
                url: url,
                method: 'POST',
                data: dataJson,
                contentType: 'application/json',
                dataType: 'text',
                success: function (result) {
                    document.getElementById("viewer").innerHTML = result;
                }
            });
        }

        function put() {

            const urlp = "http://localhost:8080/PUT";

            let editID = document.getElementById("id").value;
            let nama = document.getElementById("nama").value;
            let nik = document.getElementById("nik").value;
            let tglLahir = document.getElementById("tanggalLahir").value;
            let file = document.getElementById("file").value;
            let timestamp = document.getElementById("timestamp").value;
            let dataText = { "id": editID, "nama": nama, "nik": nik, "tanggalLahir": tglLahir, "file":file, "timestamp":timestamp };
            let dataJson = JSON.stringify(dataText);

            $.ajax({
                url: urlp,
                method: 'PUT',
                data: dataJson,
                contentType: 'application/json',
                dataType: 'text',
                success: function (result) {
                    document.getElementById("viewer").innerHTML = result;
                }
            });
        }

        function get() {
            const urlg = "http://localhost:8080/GET";
            $.ajax({
                url: urlg,
                method: 'GET',
                dataType: 'text',
                success: function (result) {
                    document.getElementById("viewer").innerHTML = result;
                }
            });
        }

        function del() {

            const urlg = "http://localhost:8080/DELETE";
            let editID = document.getElementById("id").value;
            let dataText = { "id": editID};
            let dataJson = JSON.stringify(dataText);
            $.ajax({
                url: urlg,
                method: 'DELETE',
                data: dataJson,
                contentType: 'application/json',
                dataType: 'text',
                success: function (result) {
                    document.getElementById("viewer").innerHTML = result;
                }
            });
        }


    </script>

    <table>
        <tr>
            <td>ID</td>
            <td><input type="text" id="id" name="id" /></td>
        </tr>

        <tr>
            <td>Nama</td>
            <td><input type="text" id="nama" name="nama" /></td>
        </tr>

        <tr>
            <td>NIK</td>
            <td><input type="text" id="nik" name="nik" /></td>
        </tr>

        <tr>
            <td>Tanggal Lahir</td>
            <td><input type="date" id="tanggalLahir" name="tanggalLahir" /></td>
        </tr>

        <tr>
            <td>File</td>
            <td><input type="file" id="file" name="file" /></td>
        </tr>

        <tr>
            <td>Timestamp</td>
            <td><input type="datetime-local" id="timestamp" name="timestamp" /></td>
        </tr>

        <tr>
            <td><button onclick="get()">GET</button> <br /></td>
            <td><button onclick="post()">CREATE</button> <br /></td>
        </tr>

        <tr>
            <td><button onclick="put()">EDIT</button> <br /></td>
            <td><button onclick="del()">DELETE</button><br /></td>
        </tr>
    </table>


    <hr />
    <div id="viewer"></div>
</body>

</html>